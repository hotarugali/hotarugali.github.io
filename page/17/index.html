<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>お前はどこまで見えている - 僕たちは そうやって どこまで行くのだろう、どこまで行けるのだろう</title><meta name="author" content="hotarugali"><meta name="copyright" content="hotarugali"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="你的双眼能够看到多远呢">
<meta property="og:type" content="website">
<meta property="og:title" content="お前はどこまで見えている">
<meta property="og:url" content="https://hotarugali.github.io/page/17/index.html">
<meta property="og:site_name" content="お前はどこまで見えている">
<meta property="og:description" content="你的双眼能够看到多远呢">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hotarugali.github.io/img/hotarugali.jpg">
<meta property="article:author" content="hotarugali">
<meta property="article:tag" content="頑張れ">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hotarugali.github.io/img/hotarugali.jpg"><link rel="shortcut icon" href="/img/hotarugali.jpg"><link rel="canonical" href="https://hotarugali.github.io/page/17/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//www.clarity.ms"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?297e40d6e8840f7c1ba9900535589fa1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-FEG5THRHCZ"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-FEG5THRHCZ');
</script><script>(function(c,l,a,r,i,t,y){
    c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
    t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
    y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
})(window, document, "clarity", "script", "68ocnze3o7");</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":true,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'お前はどこまで見えている',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-12-17 12:15:20'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="//at.alicdn.com/t/font_2479343_vob9mc984l.css"><link rel="stylesheet" href="/css/custom.css"  media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/botui.css"><style type="text/css">.app-refresh{position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease}.app-refresh-wrap{display:flex;color:#fff;height:100%;align-items:center;justify-content:center}.app-refresh-wrap a{color:#fff;text-decoration:underline;cursor:pointer}</style><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-electric-clock-plus@latest/css/clock.css"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.0.0"><link rel="alternate" href="/atom.xml" title="お前はどこまで見えている" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = 'hidden';
    document.getElementById('loading-box').classList.remove("loaded")
  }
}

preloader.initLoading()
window.addEventListener('load',()=> { preloader.endLoading() })

if (false) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/hotarugali.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">529</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">161</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">155</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw iconfont icon-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw iconfont icon-label"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw iconfont icon-Category"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw iconfont icon-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw iconfont icon-book"></i><span> 说说</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw iconfont icon-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/bangumis/"><i class="fa-fw iconfont icon-love"></i><span> 番剧</span></a></li><li><a class="site-page child" href="/comment/"><i class="fa-fw iconfont icon-message"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw iconfont icon-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/fcircle/"><i class="fa-fw iconfont icon-f-circle"></i><span> 朋友圈</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw iconfont icon-person1"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/cover/%E5%9B%9B%E6%9C%88%E6%98%AF%E4%BD%A0%E7%9A%84%E8%B0%8E%E8%A8%80-2.png')"><nav id="nav"><span id="blog-info"><a href="/" title="お前はどこまで見えている"><span class="site-name">お前はどこまで見えている</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw iconfont icon-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw iconfont icon-label"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw iconfont icon-Category"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw iconfont icon-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw iconfont icon-book"></i><span> 说说</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw iconfont icon-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/bangumis/"><i class="fa-fw iconfont icon-love"></i><span> 番剧</span></a></li><li><a class="site-page child" href="/comment/"><i class="fa-fw iconfont icon-message"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw iconfont icon-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/fcircle/"><i class="fa-fw iconfont icon-f-circle"></i><span> 朋友圈</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw iconfont icon-person1"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">お前はどこまで見えている</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/hotarugali" target="_blank" title="Github"><i class="iconfont icon-github"></i></a><a class="social-icon" href="https://gitee.com/hotarugali" target="_blank" title="Gitee"><i class="iconfont icon-gitee-fill-round"></i></a><a class="social-icon" href="mailto:hotarugali@163.com" target="_blank" title="Email"><i class="iconfont icon-email"></i></a><a class="social-icon" href="/img/social/wechat.png" target="_blank" title="WeChat"><i class="iconfont icon-weixin"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="iconfont icon-rss"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2021/04/28/Technique/Linux/Sundry/Linux%E4%B8%8Bnvidia-smi%E6%8A%A5%E9%94%99/" title="Linux下nvidia-smi报错"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hotarugali.github.io/FigureBed/wallpaper/153.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux下nvidia-smi报错"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/28/Technique/Linux/Sundry/Linux%E4%B8%8Bnvidia-smi%E6%8A%A5%E9%94%99/" title="Linux下nvidia-smi报错">Linux下nvidia-smi报错</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-28T08:55:48.000Z" title="发表于 2021-04-28 16:55:48">2021-04-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Technique/">Technique</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Technique/Linux/">Linux</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Technique/Linux/Sundry/">Sundry</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Sundry/">Sundry</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Technique/">Technique</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Linux/">Linux</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2021/04/28/Technique/Linux/Sundry/Linux%E4%B8%8Bnvidia-smi%E6%8A%A5%E9%94%99/#post-comment"><span class="waline-comment-count" id="/2021/04/28/Technique/Linux/Sundry/Linux%E4%B8%8Bnvidia-smi%E6%8A%A5%E9%94%99/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">1. Failed to initialize NVML: driver/library version mismatch

问题：服务器更新 N 卡驱动版本之后，内核中的 N 卡驱动模块没有更新。
解决：有两种方式解决

重启服务器。
让内核重新载入 N 卡驱动模块：

12sudo rmmod nvidianvidia-smi


2. NVIDIA-SMI has failed because it couldn't communicate with the NVIDIA driver. Make sure that the latest NVIDIA driver is installed and running.

问题：N 卡驱动模块没有成功加载到内核，可能是由于 Linux 内核升级导致版本不兼容。
解决：

检查是否安装了 dkms（dkms 是一个非常方便的内核模块管理工具），如果没有安装需要手动安装一下。
利用 dkms 检测 N 卡驱动模块在 Linux 内核升级时是否有成功编译加载：

1dkms status

若显示 N 卡驱动模块没有成功编译加载，则可以利 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/04/22/Technique/ImageMoment/%E5%9B%BE%E5%83%8F%E7%9F%A9%E6%A6%82%E8%BF%B0/" title="图像矩概述"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hotarugali.github.io/FigureBed/wallpaper/952.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="图像矩概述"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/22/Technique/ImageMoment/%E5%9B%BE%E5%83%8F%E7%9F%A9%E6%A6%82%E8%BF%B0/" title="图像矩概述">图像矩概述</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-22T08:29:36.000Z" title="发表于 2021-04-22 16:29:36">2021-04-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Technique/">Technique</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Technique/ImageMoment/">ImageMoment</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Technique/">Technique</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/ImageMoment/">ImageMoment</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2021/04/22/Technique/ImageMoment/%E5%9B%BE%E5%83%8F%E7%9F%A9%E6%A6%82%E8%BF%B0/#post-comment"><span class="waline-comment-count" id="/2021/04/22/Technique/ImageMoment/%E5%9B%BE%E5%83%8F%E7%9F%A9%E6%A6%82%E8%BF%B0/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">1. 概述
矩函数在图像分析中有着广泛的应用，如模式识别、目标分类、目标识别与方位估计、图像编码和重构等。一个从一幅数字图像中计算出来的矩集，通常描述了该图像形状的全局特征，并提供大量的关于该图像不同类型的几何特性信息。

一个概率密度函数的零阶、一阶、二阶矩分别表示其全概率、数学期望和方差。
零阶到三阶矩用于描述总体水平上的图像特征，而更高阶矩则含有更好的图像细节，但通常对噪声更加敏感，可以变换方式减少或消除噪声的影响。

2. 定义
2.1 XY 坐标
将一幅图像看成一个二维密度分布 f(x,y)f(x,y)f(x,y)，函数值 f(x,y)f(x,y)f(x,y) 表示点 (x,y)(x,y)(x,y) 处图像像素的亮度值；用 ζ\zetaζ 表示 x−yx-yx−y 平面上图像的区域，即 f(x,y)f(x,y)f(x,y) 的定义域范围。设一幅图像的亮度函数为 f(x,y)f(x,y)f(x,y)，它的 (p+q)(p+q)(p+q) 阶矩函数的一般定义如下：
\begin{aligned}
\Phi_{pq} = \iint\limits_\zeta \Psi_{pq}(x ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/04/22/Technique/Rust/Rust%E5%B8%B8%E8%A7%81%E9%9B%86%E5%90%88/" title="Rust常见集合"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hotarugali.github.io/FigureBed/wallpaper/1467.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust常见集合"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/22/Technique/Rust/Rust%E5%B8%B8%E8%A7%81%E9%9B%86%E5%90%88/" title="Rust常见集合">Rust常见集合</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-22T03:40:20.000Z" title="发表于 2021-04-22 11:40:20">2021-04-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Technique/">Technique</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Technique/Rust/">Rust</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Technique/">Technique</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Rust/">Rust</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2021/04/22/Technique/Rust/Rust%E5%B8%B8%E8%A7%81%E9%9B%86%E5%90%88/#post-comment"><span class="waline-comment-count" id="/2021/04/22/Technique/Rust/Rust%E5%B8%B8%E8%A7%81%E9%9B%86%E5%90%88/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">1. 简介
Rust 标准库中包含一系列被称为「集合」（collections）的非常有用的数据结构。不同于内建的数组和元组类型，这些集合指向的数据是储存在堆上的，这意味着数据的数量不必在编译时就已知，并且还可以随着程序的运行增长或缩小。
2. 向量（vector）
vector 的数据类型为Vec&lt;T&gt;，它允许我们在一个单独的数据结构中储存多于一个的值，它在内存中彼此相邻地排列所有的值。

vector 只能储存相同类型的值。

2.1 创建向量
创建一个新向量的基本语法示例如下：
12345// 方式一：新建一个空的向量let v: Vec&lt;i32&gt; = Vec::new();// 方式二：使用初始值来新建向量// vec! 为 Rust 提供的一个宏let v = vec![1, 2, 3];
【注】在向量的结尾增加新元素时，在没有足够空间将所有所有元素依次相邻存放的情况下，可能会要求分配新内存并将老的元素拷贝到新的空间中。
2.2 更新向量

向一个向量末尾追加元素，可以使用 push 方法：

12345let mut v = Vec::new();/ ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/04/21/Technique/Rust/Rust%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F/" title="Rust模块系统"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hotarugali.github.io/FigureBed/wallpaper/592.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust模块系统"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/21/Technique/Rust/Rust%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F/" title="Rust模块系统">Rust模块系统</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-21T13:59:54.000Z" title="发表于 2021-04-21 21:59:54">2021-04-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Technique/">Technique</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Technique/Rust/">Rust</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Technique/">Technique</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Rust/">Rust</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2021/04/21/Technique/Rust/Rust%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F/#post-comment"><span class="waline-comment-count" id="/2021/04/21/Technique/Rust/Rust%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">1. 简介
Rust 的模块系统用来管理代码的组织，包括哪些内容可以被公开，哪些内容作为私有部分，以及程序每个作用域中的名字等。模块系统包括：

包（Packages）：Cargo 的一个功能，允许构建、测试和分享 crate。
crate：一个模块的树形结构，它形成了库或二进制项目。
模块（Modules）和 use： 允许你控制作用域和路径的私有性。
路径（path）：一个命名例如结构体、函数或模块等项的方式。

2. 包和 crate
2.1 crate
crate 是一个二进制项或者库。crate root 是一个源文件，Rust 编译器以它为起始点，并构成你的 crate 的根模块。

一个 crate 会将一个作用域内的相关功能分组到一起，使得该功能可以很方便地在多个项目之间共享。

2.2 包
包（package） 是提供一系列功能的一个或者多个 crate。一个包会包含有一个 Cargo.toml 文件，阐述如何去构建这些 crate。

一个包中至多只能包含一个库 crate（library crate）。
包中可以包含任意多个二进制 crate（binary cra ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/04/21/Technique/Rust/Rust%E6%96%B9%E6%B3%95%E5%92%8C%E5%85%B3%E8%81%94%E5%87%BD%E6%95%B0/" title="Rust方法和关联函数"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hotarugali.github.io/FigureBed/wallpaper/39.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust方法和关联函数"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/21/Technique/Rust/Rust%E6%96%B9%E6%B3%95%E5%92%8C%E5%85%B3%E8%81%94%E5%87%BD%E6%95%B0/" title="Rust方法和关联函数">Rust方法和关联函数</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-21T11:19:52.000Z" title="发表于 2021-04-21 19:19:52">2021-04-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Technique/">Technique</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Technique/Rust/">Rust</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Technique/">Technique</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Rust/">Rust</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2021/04/21/Technique/Rust/Rust%E6%96%B9%E6%B3%95%E5%92%8C%E5%85%B3%E8%81%94%E5%87%BD%E6%95%B0/#post-comment"><span class="waline-comment-count" id="/2021/04/21/Technique/Rust/Rust%E6%96%B9%E6%B3%95%E5%92%8C%E5%85%B3%E8%81%94%E5%87%BD%E6%95%B0/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">1. 方法
1.1 简介

方法与函数类似：它们使用 fn 关键字和名称声明，可以拥有参数和返回值，同时包含在某处调用该方法时会执行的代码。
不过方法与函数是不同的，方法是在结构体（或者枚举、trait 对象）的上下文中被定义的。
为了使方法位于指定结构体的上下文中，需要将方法放置在该结构体的 impl 块中。
方法的第一个参数总是 self，它代表调用该方法的结构体实例。

1.2 格式
定义一个结构体的方法示例如下：
12345678910struct Rectangle &#123;    width: u32,    height: u32,&#125;// 定义 Rectangle 的方法impl Rectangle &#123;    fn area(&amp;self) -&gt; u32 &#123;        self.width * self.height    &#125;&#125;
2. 关联函数
2.1 简介

关联函数与结构体相关联，同样在 impl 块中定义。它和方法的不同在于它不以 self 作为参数，因此它不是一个结构体的实例。
关联函数经常被用 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/04/19/Technique/Rust/Rust%E6%89%80%E6%9C%89%E6%9D%83/Rust%E6%89%80%E6%9C%89%E6%9D%83/" title="Rust所有权"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hotarugali.github.io/FigureBed/wallpaper/396.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust所有权"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/19/Technique/Rust/Rust%E6%89%80%E6%9C%89%E6%9D%83/Rust%E6%89%80%E6%9C%89%E6%9D%83/" title="Rust所有权">Rust所有权</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-19T07:14:39.000Z" title="发表于 2021-04-19 15:14:39">2021-04-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Technique/">Technique</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Technique/Rust/">Rust</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Technique/">Technique</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Rust/">Rust</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2021/04/19/Technique/Rust/Rust%E6%89%80%E6%9C%89%E6%9D%83/Rust%E6%89%80%E6%9C%89%E6%9D%83/#post-comment"><span class="waline-comment-count" id="/2021/04/19/Technique/Rust/Rust%E6%89%80%E6%9C%89%E6%9D%83/Rust%E6%89%80%E6%9C%89%E6%9D%83/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">1. 简介
所有运行的程序都必须管理其使用计算机内存的方式。一些语言中具有垃圾回收机制，在程序运行时不断地寻找不再使用的内存；在另一些语言中，程序员必须亲自分配和释放内存。Rust 则选择了第三种方式：通过所有权系统管理内存，编译器在编译时会根据一系列的规则进行检查。在运行时，所有权系统的任何功能都不会减慢程序。
2. 所有权规则

Rust 中每一个值都有一个被称为「所有者」的变量。
值在任一时刻有且只有一个所有者。
当所有者离开作用域，这个值将被丢弃（内存回收）。

2.1 作用域
变量的作用域是其在程序中有效的范围，一个变量作用域从声明的地方开始一直持续到最后一次使用为止，且其作用域被限制在变量声明所处的最内层 &#123;&#125; 代码块中，即最大不能超出其所处的最内层 &#123;&#125; 区域。
2.2 垃圾回收

在有垃圾回收（garbage collector，GC）的语言中， GC 记录并清除不再使用的内存，而我们并不需要关心它。
在没有 GC 的语言中，需要手动识别出不再使用的内存并调用代码显式释放，跟请求内存的时候一样。

Rust 采取了一个不同的策略： ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/04/19/Technique/Rust/Rust%E6%8E%A7%E5%88%B6%E6%B5%81/" title="Rust控制流"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hotarugali.github.io/FigureBed/wallpaper/855.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust控制流"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/19/Technique/Rust/Rust%E6%8E%A7%E5%88%B6%E6%B5%81/" title="Rust控制流">Rust控制流</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-19T06:11:25.000Z" title="发表于 2021-04-19 14:11:25">2021-04-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Technique/">Technique</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Technique/Rust/">Rust</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Technique/">Technique</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Rust/">Rust</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2021/04/19/Technique/Rust/Rust%E6%8E%A7%E5%88%B6%E6%B5%81/#post-comment"><span class="waline-comment-count" id="/2021/04/19/Technique/Rust/Rust%E6%8E%A7%E5%88%B6%E6%B5%81/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">1. 条件结构
Rust 中主要的条件结构为 if 表达式。
1.1 if 表达式
if 表达式的基本语法格式如下：
123456789if &lt;condition1&gt; &#123;	...&#125; else if &lt;condition2&gt; &#123;	...&#125; else if &lt;conditionn&gt; &#123;	...&#125; else &#123;	...&#125;
其中，else if 和 else 分支都是可选的。表达式中的条件 conditionX 必须是 bool 类型的。

由于是表达式，因此可以将 if 表达式的值赋值给变量。
由于 Rust 是静态编译语言，要求在编译时就确定所有变量的类型，因此 if 表达式的每个分支可能的返回值都必须相同。

123456let condition = true;let branch = if condition &#123;	1&#125; else &#123;	2&#125;
2. 循环结构
Rust 中提供的循环结构有 loop、while 和 for。Rust 提 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/04/19/Technique/Rust/Rust%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/" title="Rust错误处理"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hotarugali.github.io/FigureBed/wallpaper/1207.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust错误处理"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/19/Technique/Rust/Rust%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/" title="Rust错误处理">Rust错误处理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-19T06:08:42.000Z" title="发表于 2021-04-19 14:08:42">2021-04-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Technique/">Technique</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Technique/Rust/">Rust</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Technique/">Technique</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Rust/">Rust</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2021/04/19/Technique/Rust/Rust%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/#post-comment"><span class="waline-comment-count" id="/2021/04/19/Technique/Rust/Rust%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">1. 简介
在很多情况下，Rust 要求你承认出错的可能性，并在编译代码之前就采取行动。这些要求使得程序更为健壮，它们确保了你会在将代码部署到生产环境之前就发现错误并正确地处理它们！Rust 将错误组合成两个主要类别：「可恢复错误」（recoverable）和「不可恢复错误」（unrecoverable）。

可恢复错误通常代表向用户报告错误和重试操作是合理的情况，比如未找到文件。
不可恢复错误通常是 bug 的同义词，比如尝试访问超过数组结尾的位置。

大部分语言并不区分这两类错误，并采用类似异常这样方式统一处理他们。Rust 并没有异常，但是有可恢复错误 Result&lt;T, E&gt; 和不可恢复（遇到错误时停止程序执行）错误 panic!。

panic! 宏代表一个程序无法处理的状态，并停止执行而不是使用无效或不正确的值继续处理。
Result 枚举代表操作可能会在一种可以恢复的情况下失败。可以使用 Result 来告诉代码调用者他需要处理潜在的成功或失败。在

适当的场景使用 panic! 和 Result 将会使代码在面对不可避免的错误时显得更加可靠。
2. pani ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/04/19/Technique/Programming/%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC%E8%A7%84%E8%8C%83/" title="代码风格规范"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hotarugali.github.io/FigureBed/wallpaper/124.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="代码风格规范"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/19/Technique/Programming/%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC%E8%A7%84%E8%8C%83/" title="代码风格规范">代码风格规范</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-19T05:29:32.000Z" title="发表于 2021-04-19 13:29:32">2021-04-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Technique/">Technique</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Technique/Programming/">Programming</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Technique/">Technique</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Programming/">Programming</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2021/04/19/Technique/Programming/%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC%E8%A7%84%E8%8C%83/#post-comment"><span class="waline-comment-count" id="/2021/04/19/Technique/Programming/%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC%E8%A7%84%E8%8C%83/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">1. 简介
各种编程语言层出不穷，各种语言的代码风格规范也不尽相同。主流的代码风格规范有：camel case、snake case、kebab case。
2. 代码风格
2.1 camel case（驼峰式）
camel case 式命名的名称中，单词之间直接相连，除了第一个单词外后面单词首字母均大写。

如果第一个单词首字母大写，则称为 CamelCase（大驼峰式）。
如果第一个单词首字母小写，则称为 camelCase（小驼峰式）。

2.2 snake case（蛇式）
snake case 式命名的名称中，使用 _ 来分隔相邻单词。

如果所有单词都小写，称为 lower_snake_case（小蛇式）。
如果所有单词都大写，称为 UPPER_SNAKE_CASE（大蛇式）。

2.3 kebab case（烤肉串式）
kebab case 式命名的名称中，使用 - 来分隔相邻单词，所有单词都小写。
附录
参考资料来源于：

Letter case
Camel case
Snake case

</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/04/19/Technique/Rust/Rust%E5%87%BD%E6%95%B0/" title="Rust函数"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hotarugali.github.io/FigureBed/wallpaper/321.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust函数"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/19/Technique/Rust/Rust%E5%87%BD%E6%95%B0/" title="Rust函数">Rust函数</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-19T04:42:39.000Z" title="发表于 2021-04-19 12:42:39">2021-04-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Technique/">Technique</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Technique/Rust/">Rust</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Technique/">Technique</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Rust/">Rust</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2021/04/19/Technique/Rust/Rust%E5%87%BD%E6%95%B0/#post-comment"><span class="waline-comment-count" id="/2021/04/19/Technique/Rust/Rust%E5%87%BD%E6%95%B0/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">1. 格式
Rust 代码中函数定义的基本语法格式如下：
1234fn &lt;function&gt;(&lt;parameters&gt;) &#123;	// 函数体	...&#125;
其中，fn 为函数声明关键字，&lt;function&gt; 为函数名，&lt;parameters&gt; 为参数列表，&#123;&#125; 用于指定函数体的开始和结束。和大多数编程语言一样，Rust 中 main 函数也是程序的入口点。
2. 参数
Rust 函数可以定义输入参数列表 &lt;parameters&gt;。在 &lt;parameters&gt; 中，必须声明每个参数的类型，多个参数用 , 分隔。
1234fn example(x: i32, y: i32) &#123;	println!(&quot;The value of x is: &#123;&#125;&quot;, x);    println!(&quot;The value of y is: &#123;&#125;&quot;, y);&#125;
3. 函数体
函数体由一系列的语句和一个可选的结尾表 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/04/19/Technique/Rust/Rust%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" title="Rust基本数据类型"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hotarugali.github.io/FigureBed/wallpaper/1267.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust基本数据类型"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/19/Technique/Rust/Rust%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" title="Rust基本数据类型">Rust基本数据类型</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-19T03:06:34.000Z" title="发表于 2021-04-19 11:06:34">2021-04-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Technique/">Technique</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Technique/Rust/">Rust</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Technique/">Technique</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Rust/">Rust</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2021/04/19/Technique/Rust/Rust%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#post-comment"><span class="waline-comment-count" id="/2021/04/19/Technique/Rust/Rust%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">1. 简介
在 Rust 中，每个值都属于某一个数据类型，用来告诉 Rust 它被指定为何种数据，以便明确数据处理方式。Rust 基本数据类型主要有两类子集：标量（scalar）和复合（compound）。

此文所讲的基本数据类型都是 Rust 原生的数据类型，它们都是创建在「栈」上的数据结构。
Rust 标准库还提供了一些更复杂的数据类型，它们有些是创建在「堆」上的数据结构，比如下文提到的 vector 数据类型。

【注】Rust 是静态类型语言，因此在编译时就必须知道所有变量的类型。通常，根据值及其使用方式，Rust 编译器可以推断出我们想要用的类型；当多种类型均有可能时，必须增加类型注解，否则编译会报错。
2. 标量类型
标量（scalar）类型代表一个单独的值。Rust 有四种基本的标量类型：整型、浮点型、布尔类型和字符类型。
2.1 整型
Rust 内建的整数类型如下表所示：



长度
有符号
无符号




8-bit
i8
u8


16-bit
i16
u16


32-bit
i32
u32


64-bit
i64
u64


128-bit
i128
u12 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/04/19/Technique/Rust/Rust%E5%B8%B8%E9%87%8F%E4%B8%8E%E5%8F%98%E9%87%8F/" title="Rust常量与变量"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hotarugali.github.io/FigureBed/wallpaper/898.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust常量与变量"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/19/Technique/Rust/Rust%E5%B8%B8%E9%87%8F%E4%B8%8E%E5%8F%98%E9%87%8F/" title="Rust常量与变量">Rust常量与变量</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-19T02:45:55.000Z" title="发表于 2021-04-19 10:45:55">2021-04-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Technique/">Technique</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Technique/Rust/">Rust</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Technique/">Technique</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Rust/">Rust</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2021/04/19/Technique/Rust/Rust%E5%B8%B8%E9%87%8F%E4%B8%8E%E5%8F%98%E9%87%8F/#post-comment"><span class="waline-comment-count" id="/2021/04/19/Technique/Rust/Rust%E5%B8%B8%E9%87%8F%E4%B8%8E%E5%8F%98%E9%87%8F/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">1. 常量
声明常量使用的关键字是 const。

在声明常量时，必须注明值的类型。
常量可以在任何作用域中声明，包括全局作用域。常量在它的作用域中，整个程序生命周期中都有效。
常量只能被设置为常量表达式，而不能是函数调用的结果，或其他任何只能在运行时计算出的值。
将遍布于应用程序中的硬编码值声明为常量，能帮助后来的代码维护人员了解值的意图。如果将来需要修改硬编码值，也只需修改汇聚于一处的硬编码值。

1const MAX_POINTS: u32 = 100_000;
2. 变量
Rust 中的变量是默认不可变的（immutable），这是推动我们充分利用 Rust 提供的安全性和简单并发性来编写代码的众多方式之一。不过我们仍然可以使用可变变量。声明变量使用的关键字是 let 。
2.1 不变变量
当变量不可变时，一旦值被绑定一个名称上，就不能改变这个值。定义变量的基本语法如下：
1let var = &lt;value&gt;;
这种方式定义的变量默认是不可变的。
2.2 可变变量
定义的变量只是默认不可变，我们可以在变量名加上 mut 来使其可变：
1let mut var = & ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/16/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/#content-inner">16</a><span class="page-number current">17</span><a class="page-number" href="/page/18/#content-inner">18</a><span class="space">&hellip;</span><a class="page-number" href="/page/45/#content-inner">45</a><a class="extend next" rel="next" href="/page/18/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/hotarugali.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">hotarugali</div><div class="author-info__description">你的双眼能够看到多远呢</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">529</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">161</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">155</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/hotarugali"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/hotarugali" target="_blank" title="Github"><i class="iconfont icon-github"></i></a><a class="social-icon" href="https://gitee.com/hotarugali" target="_blank" title="Gitee"><i class="iconfont icon-gitee-fill-round"></i></a><a class="social-icon" href="mailto:hotarugali@163.com" target="_blank" title="Email"><i class="iconfont icon-email"></i></a><a class="social-icon" href="/img/social/wechat.png" target="_blank" title="WeChat"><i class="iconfont icon-weixin"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="iconfont icon-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客星球 ^_^</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/11/13/Life/%E9%98%85%E8%AF%BB/%E8%A2%AB%E8%AE%A8%E5%8E%8C%E7%9A%84%E5%8B%87%E6%B0%94/" title="被讨厌的勇气"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hotarugali.github.io/FigureBed/wallpaper/1384.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="被讨厌的勇气"/></a><div class="content"><a class="title" href="/2023/11/13/Life/%E9%98%85%E8%AF%BB/%E8%A2%AB%E8%AE%A8%E5%8E%8C%E7%9A%84%E5%8B%87%E6%B0%94/" title="被讨厌的勇气">被讨厌的勇气</a><time datetime="2023-11-13T06:29:28.000Z" title="发表于 2023-11-13 14:29:28">2023-11-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/28/Finance/Quant/%E9%87%8F%E5%8C%96%E7%AC%94%E8%AF%95%E6%95%B0%E7%90%86%E7%9F%A5%E8%AF%86%E5%A4%8D%E4%B9%A0/" title="量化笔试数理知识复习"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hotarugali.github.io/FigureBed/wallpaper/296.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="量化笔试数理知识复习"/></a><div class="content"><a class="title" href="/2023/10/28/Finance/Quant/%E9%87%8F%E5%8C%96%E7%AC%94%E8%AF%95%E6%95%B0%E7%90%86%E7%9F%A5%E8%AF%86%E5%A4%8D%E4%B9%A0/" title="量化笔试数理知识复习">量化笔试数理知识复习</a><time datetime="2023-10-28T12:33:43.000Z" title="发表于 2023-10-28 20:33:43">2023-10-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/12/Life/%E9%98%85%E8%AF%BB/%E4%BD%A0%E5%BD%93%E5%83%8F%E9%B8%9F%E9%A3%9E%E5%BE%80%E4%BD%A0%E7%9A%84%E5%B1%B1/" title="你当像鸟飞往你的山"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hotarugali.github.io/FigureBed/wallpaper/1484.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="你当像鸟飞往你的山"/></a><div class="content"><a class="title" href="/2023/10/12/Life/%E9%98%85%E8%AF%BB/%E4%BD%A0%E5%BD%93%E5%83%8F%E9%B8%9F%E9%A3%9E%E5%BE%80%E4%BD%A0%E7%9A%84%E5%B1%B1/" title="你当像鸟飞往你的山">你当像鸟飞往你的山</a><time datetime="2023-10-12T08:36:34.000Z" title="发表于 2023-10-12 16:36:34">2023-10-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/09/Technique/Python/Python%E6%A8%A1%E5%9D%97logging/" title="Python模块logging"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hotarugali.github.io/FigureBed/wallpaper/1130.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python模块logging"/></a><div class="content"><a class="title" href="/2023/10/09/Technique/Python/Python%E6%A8%A1%E5%9D%97logging/" title="Python模块logging">Python模块logging</a><time datetime="2023-10-09T02:04:21.000Z" title="发表于 2023-10-09 10:04:21">2023-10-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/05/Life/%E9%98%85%E8%AF%BB/%E5%A4%B1%E5%8E%BB%E7%9A%84%E4%BA%8C%E5%8D%81%E5%B9%B4%EF%BC%9A%E6%97%A5%E6%9C%AC%E7%BB%8F%E6%B5%8E%E9%95%BF%E6%9C%9F%E5%81%9C%E6%BB%9E%E7%9A%84%E7%9C%9F%E6%AD%A3%E5%8E%9F%E5%9B%A0/" title="失去的二十年：日本经济长期停滞的真正原因"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hotarugali.github.io/FigureBed/wallpaper/240.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="失去的二十年：日本经济长期停滞的真正原因"/></a><div class="content"><a class="title" href="/2023/10/05/Life/%E9%98%85%E8%AF%BB/%E5%A4%B1%E5%8E%BB%E7%9A%84%E4%BA%8C%E5%8D%81%E5%B9%B4%EF%BC%9A%E6%97%A5%E6%9C%AC%E7%BB%8F%E6%B5%8E%E9%95%BF%E6%9C%9F%E5%81%9C%E6%BB%9E%E7%9A%84%E7%9C%9F%E6%AD%A3%E5%8E%9F%E5%9B%A0/" title="失去的二十年：日本经济长期停滞的真正原因">失去的二十年：日本经济长期停滞的真正原因</a><time datetime="2023-10-05T11:17:34.000Z" title="发表于 2023-10-05 19:17:34">2023-10-05</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Language/" style="font-size: 1.19em; color: rgb(166, 45, 103)">Language</a><a href="/tags/Japanese/" style="font-size: 1.19em; color: rgb(197, 150, 4)">Japanese</a><a href="/tags/Finance/" style="font-size: 1.21em; color: rgb(162, 104, 144)">Finance</a><a href="/tags/Quant/" style="font-size: 1.19em; color: rgb(50, 14, 145)">Quant</a><a href="/tags/Share/" style="font-size: 1.15em; color: rgb(61, 168, 17)">Share</a><a href="/tags/Game/" style="font-size: 1.19em; color: rgb(155, 101, 48)">Game</a><a href="/tags/MonsterHunter/" style="font-size: 1.15em; color: rgb(15, 10, 68)">MonsterHunter</a><a href="/tags/PSP/" style="font-size: 1.15em; color: rgb(24, 57, 121)">PSP</a><a href="/tags/Tools/" style="font-size: 1.31em; color: rgb(104, 85, 195)">Tools</a><a href="/tags/Life/" style="font-size: 1.35em; color: rgb(149, 100, 60)">Life</a><a href="/tags/%E7%94%9F%E4%BA%A7%E5%8A%9B/" style="font-size: 1.17em; color: rgb(96, 60, 102)">生产力</a><a href="/tags/%E8%AF%BE%E7%A8%8B/" style="font-size: 1.15em; color: rgb(30, 186, 131)">课程</a><a href="/tags/%E9%98%85%E8%AF%BB/" style="font-size: 1.21em; color: rgb(35, 168, 103)">阅读</a><a href="/tags/%E9%9F%B3%E4%B9%90/" style="font-size: 1.15em; color: rgb(85, 180, 105)">音乐</a><a href="/tags/Literature/" style="font-size: 1.19em; color: rgb(157, 157, 144)">Literature</a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 1.15em; color: rgb(93, 67, 56)">工具</a><a href="/tags/%E6%91%98%E5%BD%95/" style="font-size: 1.17em; color: rgb(173, 188, 194)">摘录</a><a href="/tags/Research/" style="font-size: 1.41em; color: rgb(7, 153, 147)">Research</a><a href="/tags/PaperReading/" style="font-size: 1.17em; color: rgb(180, 71, 42)">PaperReading</a><a href="/tags/Sundry/" style="font-size: 1.43em; color: rgb(83, 88, 113)">Sundry</a><a href="/tags/Assessory/" style="font-size: 1.27em; color: rgb(57, 189, 32)">Assessory</a><a href="/tags/Technique/" style="font-size: 1.45em; color: rgb(130, 18, 78)">Technique</a><a href="/tags/Browser/" style="font-size: 1.17em; color: rgb(113, 22, 27)">Browser</a><a href="/tags/C/" style="font-size: 1.29em; color: rgb(67, 29, 77)">C++</a><a href="/tags/CMake/" style="font-size: 1.17em; color: rgb(91, 113, 150)">CMake</a><a href="/tags/ChannelCoding/" style="font-size: 1.23em; color: rgb(179, 190, 127)">ChannelCoding</a><a href="/tags/Configure/" style="font-size: 1.15em; color: rgb(130, 59, 65)">Configure</a><a href="/tags/CryptographyBasics/" style="font-size: 1.33em; color: rgb(138, 185, 116)">CryptographyBasics</a><a href="/tags/DIP/" style="font-size: 1.17em; color: rgb(64, 38, 177)">DIP</a><a href="/tags/DeepLearning/" style="font-size: 1.39em; color: rgb(78, 63, 68)">DeepLearning</a><a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 1.37em; color: rgb(158, 5, 111)">深度学习</a><a href="/tags/Docker/" style="font-size: 1.15em; color: rgb(144, 43, 125)">Docker</a><a href="/tags/GPS/" style="font-size: 1.15em; color: rgb(152, 150, 118)">GPS</a><a href="/tags/Git/" style="font-size: 1.21em; color: rgb(188, 103, 181)">Git</a><a href="/tags/Go/" style="font-size: 1.23em; color: rgb(37, 163, 181)">Go</a><a href="/tags/Hexo/" style="font-size: 1.15em; color: rgb(94, 128, 21)">Hexo</a><a href="/tags/ImageMoment/" style="font-size: 1.15em; color: rgb(197, 134, 11)">ImageMoment</a><a href="/tags/InformationTheory/" style="font-size: 1.19em; color: rgb(40, 179, 134)">InformationTheory</a><a href="/tags/InputMethod/" style="font-size: 1.21em; color: rgb(46, 53, 40)">InputMethod</a><a href="/tags/JavaScript/" style="font-size: 1.25em; color: rgb(31, 67, 60)">JavaScript</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">五月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">三月 2023</span><span class="card-archive-list-count">3</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">529</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2021-04-07T19:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">560.6k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-12-17T04:15:13.320Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div><div class="card-widget user-map"><div class="item-headline"><i class="fas fa-heartbeat"></i><span>访客地图</span></div><div class="item-content"><script data-pjax type="text/javascript" id="clstr_globe" src="//clustrmaps.com/globe.js?d=j7b3NOw-siuyxSK5-pubSVIOWKk8AMrKcwIBbIAP32A"></script></div></div></div></div></main><footer id="footer" style="background-image: url('/img/cover/%E5%9B%9B%E6%9C%88%E6%98%AF%E4%BD%A0%E7%9A%84%E8%B0%8E%E8%A8%80-2.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By hotarugali</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, Welcome to my blog.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  function loadWaline () {
    function initWaline () {
      let initData = {
        el: null,
        serverURL: 'https://waline-v2-hotarugali.vercel.app',
        comment: true
      }
      const waline = Waline.init(initData)
    }

    if (typeof Waline === 'object') initWaline() 
    else getScript('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.js').then(initWaline)
  }

  window.pjax ? loadWaline() : window.addEventListener('load', loadWaline)
})()</script><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/dist/typed.umd.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["僕たちは そうやって どこまで行くのだろう、どこまで行けるのだろう"])
  } else {
    document.getElementById("subtitle").textContent = '僕たちは そうやって どこまで行くのだろう、どこまで行けるのだろう'
  }
}
typedJSFn.run(subtitleType)</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    btf.addModeChange('mermaid', () => {
      window.runMermaid()
    })

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const loadWaline = () => {
      Waline.RecentComments({
        serverURL: 'https://waline-v2-hotarugali.vercel.app',
        count: 6
      }).then(({comments}) => {
        const walineArray = comments.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.insertedAt,
          }
        })
        saveToLocal.set('waline-newest-comments', JSON.stringify(walineArray), 10/(60*24))
        generateHtml(walineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      }) 
    }

    if (typeof Waline === 'object') loadWaline()
    else getScript('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.js').then(loadWaline)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('waline-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="3107777185" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="auto" data-autoplay="false" muted></div><script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script><script defer src="/live2d-widget/autoload.js"></script><div class="app-refresh" id="app-refresh"> <div class="app-refresh-wrap"> <label>✨ 網站已更新最新版本 👉</label> <a href="javascript:void(0)" onclick="location.reload()">點擊刷新</a> </div></div><script>function showNotification(){if(GLOBAL_CONFIG.Snackbar){var t="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"已更新最新版本",backgroundColor:t,duration:5e5,pos:e,actionText:"點擊刷新",actionTextColor:"#fff",onActionClick:function(t){location.reload()}})}else{var o=`top: 0; background: ${"light"===document.documentElement.getAttribute("data-theme")?"#49b1f5":"#1f1f1f"};`;document.getElementById("app-refresh").style.cssText=o}}"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",function(){showNotification()}),window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js")}));</script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script src="//code.tidio.co/p6xsdfucuppqybcfijot1hsnancsqec5.js" async="async"></script><script>function onTidioChatApiReady() {
  window.tidioChatApi.hide();
  window.tidioChatApi.on("close", function() {
    window.tidioChatApi.hide();
  });
}
if (window.tidioChatApi) {
  window.tidioChatApi.on("ready", onTidioChatApiReady);
} else {
  document.addEventListener("tidioChat-ready", onTidioChatApiReady);
}

var chatBtnFn = () => {
  document.getElementById("chat_btn").addEventListener("click", function(){
    window.tidioChatApi.show();
    window.tidioChatApi.open();
  });
}
chatBtnFn()
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start -->
  <script data-pjax src="/js/githubcalendar.js"></script>
  <script data-pjax>
        function GithubCalendarConfig(){
            var git_githubapiurl ="https://python-github-calendar-api-hotarugali.vercel.app/api?hotarugali";
            var git_color =['#ebedf0', '#fdcdec', '#fc9bd9', '#fa6ac5', '#f838b2', '#f5089f', '#c4067e', '#92055e', '#540336', '#48022f', '#30021f'];
            var git_user ="hotarugali";
            var parent_div_git = document.getElementById('recent-posts');
            var git_div_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>';
            if(parent_div_git && location.pathname =='/'){
                console.log('已挂载github calendar')
                // parent_div_git.innerHTML=git_div_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",git_div_html) // 有报错，但不影响使用(支持pjax跳转)
            };
            GithubCalendar(git_githubapiurl,git_color,git_user)
        }
        if(document.getElementById('recent-posts')){
            GithubCalendarConfig()
        }
    </script>
    <style>#github_container{min-height:280px}@media screen and (max-width:650px) {#github_container{background-image:;min-height:0px}}</style>
    <style></style><script data-pjax>function history_calendar_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>那年今日</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>';
                console.log('已挂载history_calendar')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='/'|| '/' ==='all')){

            history_calendar_injector_config()
        } </script><script data-pjax  src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><script data-pjax>function electric_clock_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img id="card-clock-loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/npm/hexo-electric-clock-plus@latest/images/weather/loading.gif" style="height: 136px; width: 100%;" data-ll-status="loading" class="entered loading"></div></div></div></div></div>';
                console.log('已挂载electric_clock')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='/'|| '/' ==='all')){

            electric_clock_injector_config()
        } </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax  src="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.js"></script><script type="text/javascript">var font='UnidreamLED'</script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script>
        <script type="text/javascript">
            loc = $.ajax({
                    url: "https://ipapi.co/json/",  //json文件位置，文件名
                    type: "GET",                    //请求方式为get
                    dataType: "json",               //返回数据格式为json
                    async: false,
                    success: function(data) {       //请求成功完成后要执行的方法 
                    }
                });
            ip=$.parseJSON(loc.responseText).ip;
            version=$.parseJSON(loc.responseText).version;
            city=$.parseJSON(loc.responseText).city;
            country=$.parseJSON(loc.responseText).country_name;
        </script>
        <script data-pjax src="https://cdn.jsdelivr.net/npm/hexo-electric-clock-plus@latest/js/clock.js"></script><!-- hexo injector body_end end --><script src="/js/markmap.js"></script></body></html>